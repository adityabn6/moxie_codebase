# Breathing RL Feature Dataset Description

## Overview
This document describes the feature datasets generated by the MOXIE pipeline, for the Reinforcement Learning (RL) project on breathing policy optimization for stress reduction.

**Objective**: Train an RL agent to learn optimal breathing patterns (Action) that minimize stress (Reward), using physiological signals (State) as context.



### Common Columns
All windowed CSV files contain:
- **Time**: The start time of the 1-second window (in seconds, relative to the start of the recording). Use this column to align/merge data across modalities.
- **Condition**: The experimental phase (e.g., 'Baseline Resting Period', 'Speech Period') active during that window.

---

## 1. Action Space: Breathing (RSP)
**Source File**: `features_rsp_windowed_1_0s_[ID]_[Visit].csv`

The agent's action space (Breathing Policy) is derived from the Respiration (RSP) signal. We characterize breathing at a 1-second resolution into three discrete phases: **Inhale**, **Hold**, and **Exhale**.

### Key Columns for Actions
| Column Name | Type | Description |
| :--- | :--- | :--- |
| **`RSP_Slope_Dominant`** | Categorical | The dominant breathing phase during this 1-second window. Values: `Inhale`, `Exhale`, `Hold`. **This is the primary discrete action label.** |
| `RSP_Slope_Inhale_Ratio` | Continuous (0-1) | Proportion of the 1-second window spent inhaling. |
| `RSP_Slope_Hold_Ratio` | Continuous (0-1) | Proportion of the 1-second window spent holding breath. |
| `RSP_Slope_Exhale_Ratio` | Continuous (0-1) | Proportion of the 1-second window spent exhaling. |

*Note: The `Slope` based features use a dynamic gradient threshold to detect breath holds, which is crucial for this specific RL formulation.*

---

## 2. State Space: Physiological Features (ECG & EDA)
The state of the environment (the user's physiological stress state) is defined by ECG and EDA features.

### A. Electrocardiogram (ECG)
**Source File**: `features_ecg_windowed_1_0s_[ID]_[Visit].csv`

Reflects heart rate variability and autonomic nervous system balance.

| Column Name | Description |
| :--- | :--- |
| `ECG_Rate_Mean` | Mean Heart Rate (BPM) for the window. |
| `HRV_RMSSD` | Root Mean Square of Successive Differences. A primary measure of vagal tone (relaxation). |
| `HRV_SDNN` | Standard Deviation of NN intervals. Measure of overall HRV. |
| `HRV_pNN50` | Percentage of successive RR intervals that differ by more than 50ms. |

### B. Electrodermal Activity (EDA)
**Source File**: `features_eda_windowed_1_0s_[ID]_[Visit].csv`

Reflects sympathetic nervous system arousal (stress).

| Column Name | Description |
| :--- | :--- |
| **`EDA_SCL_Mean`** | Skin Conductance Level (Tonic). The baseline conductivity, strongly correlated with general stress/arousal level. |
| `EDA_SCR_Freq_PerMin` | Frequency of Skin Conductance Responses (Phasic bursts). Indicates immediate reaction to stimuli. |
| `EDA_SCR_Amp_Mean` | Mean amplitude of SCR peaks within the window. |

---

## 3. Reward Function: Blood Pressure (BP)
**Source File**: `features_bp_windowed_1_0s_[ID]_[Visit].csv`

The objective is to regulate blood pressure. These features serve as the feedback/reward signal. Lower blood pressure (or stabilization) is typically the goal in stress reduction.

| Column Name | Description |
| :--- | :--- |
| **`BP_MAP_Mean`** | Mean Arterial Pressure. The average pressure in a patient's arteries during one cardiac cycle. Often the most robust single metric for BP. |
| `BP_Systolic_Mean` | Average Systolic pressure (peak pressure during heartbeat). |
| `BP_Diastolic_Mean` | Average Diastolic pressure (pressure between heartbeats). |
| `BP_PulsePressure_Mean`| Difference between Systolic and Diastolic pressure. |

---

